#!/bin/bash

# WARNING: This file is deployed from template. Raise a pull request against terraform-template to change.

export TF_VAR_region="us-west-2"
export REGION=${TF_VAR_region}

if [[ $TRAVIS == "true" ]]; then
  # Travis Builds
  export TF_VAR_environment="u${TRAVIS_COMMIT:0:7}"
  export TF_VAR_default_tags="{Environment = \"$TF_VAR_environment\", EnvironmentType = \"dev\"}"
else
  # Local Dev
  #export TF_VAR_environment="$(whoami)"
  export TF_VAR_environment="hashk"
  export TF_VAR_default_tags="{Environment = \"hashk\", EnvironmentType = \"dev\"}"
  #export TF_VAR_default_tags="{Environment = \"$(whoami)\", EnvironmentType = \"dev\"}"
fi

MODULE=$( basename $PWD )

echo "MODULE is $MODULE"

if [[ $MODULE != "terraform-core" ]]; then
  # Non Core Modules
  if [[ $TRAVIS == "true" ]]; then
    export TF_VAR_environment="u${TRAVIS_COMMIT:0:7}"
  fi
  export TF_VAR_default_tags="{Environment = \"$TF_VAR_environment\", EnvironmentType = \"dev\"}"
  export TF_VAR_vpc_id="vpc-0aafe35c840ae2373"
  export TF_VAR_instance_subnet_ids="[\"subnet-020119ad6893659d3\",\"subnet-069eb60e8af0cc75f\", \"subnet-0cf9c2096eac48612\"]"
  export TF_VAR_db_subnet_ids="[\"subnet-2ca95455\",\"subnet-9d0a16d5\", \"subnet-8745e3dd\"]"
  export TF_VAR_loadbalancer_subnet_ids="[\"subnet-cbaa57b2\",\"subnet-3c0f1374\", \"subnet-e243e5b8\"]"
  export TF_VAR_lb_access_logs_s3_bucket_name="hashk-dev-lb-access-log"
fi

export TF_VAR_shared_credentials_file="$HOME/.aws/credentials"
export TF_VAR_centos_ami_filter="centos7-*"
export TF_VAR_aws_key_name="bitesize"
export TF_VAR_internal_zone_name="hashk.us-west-2.dev"
export TF_VAR_external_zone_name="hashk.us-west-2.dev.prsn.io"
export TF_VAR_environment_type="dev"
export TF_VAR_s3_bucket="bitesize-dev"
export TF_VAR_external_zone_id="ZXQDN04JXYU1S"
export TF_VAR_internal_zone_id="ZG4T996XBH8II"
# Pearson Public CIDRs: 159.182.0.0/16, 168.146.0.0/16, 195.47.223.0/24
#export TF_VAR_inbound_whitelist="[\"159.182.0.0/16\",\"168.146.0.0/16\",\"195.47.223.0/24\"]"
export TF_VAR_skip_ansible="false"

export TF_VAR_unit_tests=1

#export TF_VAR_couchbase_cluster_password=AQICAHgYz4rU+T1BgxqKrTBbkewBE5evpcnSKpB2QUcDDyOYDQEs9AaJPLsiHHssxWkqUWHXAAAAZDBiBgkqhkiG9w0BBwagVTBTAgEAME4GCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMQhEJNFtVXdL2z5kEAgEQgCGhebRzrrwe3JIUMN63IO8M5S2b/uDzEVVkfZ4BL1/Fkqk=
#export TF_VAR_couchbase_admin_password=AQICAHgYz4rU+T1BgxqKrTBbkewBE5evpcnSKpB2QUcDDyOYDQEs9AaJPLsiHHssxWkqUWHXAAAAZDBiBgkqhkiG9w0BBwagVTBTAgEAME4GCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMQhEJNFtVXdL2z5kEAgEQgCGhebRzrrwe3JIUMN63IO8M5S2b/uDzEVVkfZ4BL1/Fkqk=
#export TF_VAR_couchbase_roadmin_password=AQICAHgYz4rU+T1BgxqKrTBbkewBE5evpcnSKpB2QUcDDyOYDQEs9AaJPLsiHHssxWkqUWHXAAAAZDBiBgkqhkiG9w0BBwagVTBTAgEAME4GCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMQhEJNFtVXdL2z5kEAgEQgCGhebRzrrwe3JIUMN63IO8M5S2b/uDzEVVkfZ4BL1/Fkqk=
#export TF_VAR_couchbase_bucketadmin_password=AQICAHgYz4rU+T1BgxqKrTBbkewBE5evpcnSKpB2QUcDDyOYDQEs9AaJPLsiHHssxWkqUWHXAAAAZDBiBgkqhkiG9w0BBwagVTBTAgEAME4GCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMQhEJNFtVXdL2z5kEAgEQgCGhebRzrrwe3JIUMN63IO8M5S2b/uDzEVVkfZ4BL1/Fkqk=
